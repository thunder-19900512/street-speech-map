---
description: 画像を追加してデータベースに反映する
---

// turbo-all
画像を追加したあとは、以下の手順でシステムに反映させます。

1. `photos/` ディレクトリに新しい画像を追加します。
2. Antigravityに以下のメッセージを送ります：
   > `photos/` に追加した新しい画像を読み込んで反映して。

### Antigravityが自動で実行する手順（ワークフロー内部）

1. **ファイル特定**: `photos/` 内の未登録画像を特定します。
2. **情報の抽出**: 画像から「年月日・候補者・都道府県・選挙区・政党・スケジュール（時間/地域/場所）」を読み取ります。
3. **ファイルのリネーム**: ファイルを `yymmdd_prefecture_candidate.jpg` 形式に変更します。
4. **重複チェック**: 抽出した「年月日・候補者・スケジュール内容」が既に `database.json` に存在するか確認し、同一内容の場合は処理をスキップします。
5. **位置情報の高精度化**: 抽出された場所（施設名など）を個別に検索し、正確な座標（緯度経度）を取得します。
6. **DB更新**: `data/database.json` と `data/database.js` の両方にデータを追記します。
7. **表示確認**: 実際に `index.html` をブラウザで開き、データが正しく読み込まれ、マップにピンが表示されるかを目視（およびコンソールエラーの有無で）確認します。
8. **コミット・プッシュ**: 確認の結果問題がなければ、Gitにコミットおよびプッシュを行います。
9. **完了報告**: 反映した内容を要約して、ブラウザでの最終確認を促します。
