# 🗳 街頭演説マップ プロジェクト

このプロジェクトは、政治家の演説スケジュール（画像データ）を地図上に視覚化し、市民参加型（クラウドソース）でデータの精度を高めていくためのツールです。

## 🌟 主な機能
- **動的マップビュー**: Google Mapsライクな操作感で演説予定を確認。
- **精度ステータス**: 推定 -> 住所確認済 -> 精密特定済 の3段階でデータの信頼度を表示。
- **市民参加型の検証**: 閲覧者が「大体OK」ボタンやピンのドラッグで位置情報を修正可能。
- **異議申し立て機能**: 予定の変更や不自然な点をユーザーが報告。
- **リアルタイム同期**: Google Apps Script (GAS) を通じて、ユーザーの修正が即座に地図へ反映。

## 🛠 プロジェクトの構成
- `index.html`: メインのマップUI（Leaflet使用）
- `data/database.json`: 全スケジュールのマスターデータ（原本）
- `data/database.js`: ブラウザ読み込み用のデータファイル（JSONと同期）
- `scripts/update_db.js`: ローカルデータを安全に更新するためのNode.jsスクリプト
- `photos/`: 演説告知カードの画像保管場所

## 🚀 開発者向け：データの更新・管理方法

### 1. 市民による修正の公式反映
ユーザーが地図上で行った修正を恒久的にファイルへ反映させる手順です。
1. アプリから最新のデータベース情報をエクスポートします。
2. ターミナルで以下のコマンドを実行します。
   ```bash
   node scripts/update_db.js
   ```
3. エクスポートした内容をペーストすると、`data/backups/` に古いデータの控えを作成した上で、`database.json` と `database.js` を最新の状態に書き換えます。

### 2. 新しい画像の追加
1. `photos/` に演説画像を配置します。
2. AIアシスタントに「画像を解析してDBに追加して」と依頼します。
3. `index.html` をリロードして、ピンが追加されたか確認します。

## 🧬 システム構成
- **Frontend**: Vanilla HTML/JS, Leaflet.js, CSS
- **Backend (Storage)**: Google Sheets (via GAS Web App)
- **Data Sync**: 起動時にGASから最新の「住所確認済み」座標を取得し、ローカルデータに重ねて表示します。

## 📝 規約・ポリシー
- `terms.html`: 利用規約
- `privacy.html`: プライバシーポリシー
